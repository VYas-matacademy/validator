<html>
    <head>

    </head>
    <body>
    </body>
    <script>


var rsObj = {};
rsObj.isValid = false;


function isCreditCardValid(str) {
 this.rsObj.num = str;
  var array = str.split('-');


  var total= '';

  array.forEach(function(element) {
      total += element;
  }, this);
  return regCheck(total);
}


function allAreNotTheSame(number) {
    var chars = Array.from(number);

    for(var i = 1; i < chars.length; i++) {
        if(chars[i] !== chars[i - 1])
         return lastIsEven(number);
    }
        showResult(rsObj, "you must have at least 1 different number");
        return false;
}

function regCheck(str) {
    var number = +str;
     var regex = new RegExp("^[0-9]{16}$");
   // return regex.test(number) ? allAreTheSame(str) : false;

    if(regex.test(number)){
        return allAreNotTheSame(str);
    }
    showResult(rsObj, "Invalid data");
    return false;
}

function lastIsEven(str) {
    var lastNum = +str.slice(-1);
  //  return lastNum % 2 == 0 ? sumOfNums(str) : false;

    if(lastNum % 2 == 0){
        return sumOfNums(str);
    }
    showResult(rsObj, "last num must be even");
    return false;
}

function sumOfNums(str) {
    var nums = str.split('').map(Number);

    var result = nums.reduce(function(sum,current) {
        return sum + current;
    });

    if(result > 16){
        return true;
    }
    showResult(rsObj, "sum of all nums <= 16");
    return false;
}


function showResult(obj,warn) {
    rsObj.warn = warn;
    console.log(obj);
}
/*
alert(isCreditCardValid('9999-9999-8888-0000'));
alert(isCreditCardValid('6666-6666-6666-1666'));
alert(isCreditCardValid('a923-3211-9c01-1112'));
alert(isCreditCardValid('4444-4444-4444-4444'));
alert(isCreditCardValid('1111-1111-1111-1110'));
alert(isCreditCardValid('6666-6666-6666-6661'));
*/

 </script>
</html>